<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NKD PEREIRA üî•</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.11.1/tsparticles.bundle.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }

    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Orbitron', sans-serif;
      color: #ff0000;
      overflow-x: hidden;
    }

    /* Fondo degradado animado */
    body {
      background: linear-gradient(270deg, #000000, #1a1a1a, #ff0000, #00cfff);
      background-size: 800% 800%;
      animation: fondoAnimado 16s ease infinite;
    }

    @keyframes fondoAnimado {
      0% {background-position:0% 50%}
      50% {background-position:100% 50%}
      100% {background-position:0% 50%}
    }

    /* Efecto de resplandor en los botones */
    .boton, .boton-modal {
      box-shadow: 0 0 25px #ff0000, 0 0 40px #00cfff;
      animation: glowBoton 2s ease-in-out infinite alternate;
    }

    @keyframes glowBoton {
      from {
        box-shadow: 0 0 10px #ff0000, 0 0 20px #00cfff;
      }
      to {
        box-shadow: 0 0 40px #ff0000, 0 0 60px #00cfff;
      }
    }

    #tsparticles {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    header {
      padding: 20px 10px 10px; /* Menos espacio arriba y abajo */
      text-align: center;
    }

    header h1 {
      font-size: 3em;
      color: #00cfff;
      text-shadow: 0 0 25px #00cfff, 0 0 40px #00cfff;
      animation: glow-celeste 2s ease-in-out infinite alternate;
      letter-spacing: 2px;
      margin-bottom: 0.2em;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 18px;
      flex-wrap: wrap;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 10px #ff2a2a, 0 0 20px #ff5555;
      }
      to {
        text-shadow: 0 0 20px #ff5555, 0 0 40px #ff8888;
      }
    }

    @keyframes glow-celeste {
      from {
        text-shadow: 0 0 15px #00cfff, 0 0 30px #00eaff;
      }
      to {
        text-shadow: 0 0 30px #00eaff, 0 0 60px #00cfff;
      }
    }

    button, input {
      font-family: 'Orbitron', sans-serif;
    }

    .boton, .boton-modal {
      padding: 15px 30px;
      font-size: 1.2em;
      margin: 20px;
      background: black;
      color: #ff0000;
      border: 2px solid #ff0000;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 15px #ff0000;
      transition: all 0.3s ease-in-out;
    }

    /* Efecto de resplandor en los botones */
    .boton, .boton-modal {
      box-shadow: 0 0 25px #ff0000, 0 0 40px #00cfff;
      animation: glowBoton 2s ease-in-out infinite alternate;
    }

    @keyframes glowBoton {
      from {
        box-shadow: 0 0 10px #ff0000, 0 0 20px #00cfff;
      }
      to {
        box-shadow: 0 0 40px #ff0000, 0 0 60px #00cfff;
      }
    }

    main#contenido-principal {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: calc(100vh - 60px); /* Ajusta el alto restando el header */
      flex-direction: column;
      padding-top: 0;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
    }

    .modal-content {
      background-color: #111;
      margin: 10% auto;
      padding: 30px;
      border: 2px solid red;
      width: 90%;
      max-width: 400px;
      border-radius: 10px;
      color: #ff0000;
      box-shadow: 0 0 20px #ff0000;
      text-align: center;
    }

    .modal-content input {
      padding: 10px;
      width: 90%;
      margin-top: 15px;
      background: black;
      border: 1px solid red;
      color: red;
      font-size: 1.2em;
    }

    .cerrar {
      float: right;
      font-size: 20px;
      cursor: pointer;
      color: red;
    }

    .mensaje-error {
      color: red;
      margin-top: 10px;
    }

    table {
      width: 90%;
      margin: 0 auto 30px;
      border-collapse: collapse;
      color: #fff;
    }

    th, td {
      border: 1px solid #ff0000;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #330000;
    }

    .acciones button {
      margin: 2px;
      background-color: #ff0000;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
    }

    #formulario-registro {
      text-align: center;
      margin-bottom: 20px;
    }

    #formulario-registro input {
      width: 200px;
      margin: 5px;
      padding: 8px;
      background: black;
      color: red;
      border: 1px solid red;
    }

    .paginacion {
      text-align: center;
      margin: 10px;
    }

    .paginacion button {
      margin: 3px;
      padding: 8px 12px;
      background: black;
      color: red;
      border: 1px solid red;
      cursor: pointer;
      border-radius: 5px;
    }

    .paginacion button.activo {
      background: red;
      color: black;
    }

    @media (max-width: 600px) {
      header h1 {
        font-size: 1.5em;
      }
      main#contenido-principal {
        min-height: auto;
        padding: 10px;
      }
      .boton, .boton-modal {
        padding: 10px 15px;
        font-size: 1em;
        margin: 10px;
      }
      table, th, td {
        font-size: 0.9em;
        padding: 5px;
      }
      #formulario-registro input,
      #formulario-moto input,
      #formulario-edicion input,
      #formulario-edicion-moto input {
        width: 95%;
        font-size: 1em;
        margin: 5px 0;
      }
      .modal-content {
        width: 98%;
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <div id="tsparticles"></div>

  <header>
    <h1 style="
      font-size: 3em;
      color: #00cfff;
      text-shadow: 0 0 25px #00cfff, 0 0 40px #00cfff;
      animation: glow-celeste 2s ease-in-out infinite alternate;
      letter-spacing: 2px;
      margin-bottom: 0.2em;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 18px;
      flex-wrap: wrap;
    ">
      üî•üî• NKD PEREIRA üî•üî•
    </h1>
  </header>

  <main id="contenido-principal">
    <button class="boton" onclick="abrirModal()">ENTRADA DE CLIENTES üîê</button>
  </main>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="cerrar" onclick="cerrarModal()">‚úñ</span>
      <h2>üîë Ingrese la contrase√±a</h2>
      <input type="password" id="password" placeholder="********">
      <div class="mensaje-error" id="mensaje-error"></div>
      <button class="boton-modal" onclick="verificarPassword()">Entrar</button>
    </div>
  </div>

  <section id="seccion-secreta" style="display:none; text-align:center;">
    <h2>‚úÖ Acceso Autorizado</h2>
    <button class="boton" onclick="mostrarPersonas()">üë§ PERSONAS</button>
    <button class="boton" onclick="mostrarMotosTaller()">üèçÔ∏è MOTOS/TALLER</button>
    <button class="boton" onclick="volverAtras()">üîô Volver atr√°s</button>
  </section>

  <section id="seccion-personas" style="display:none;">
    <h2 style="text-align:center;">üë§ Lista de Personas</h2>

    <div id="formulario-registro">
      <input type="text" id="nombre" placeholder="Nombre">
      <input type="text" id="apellido" placeholder="Apellido">
      <input type="text" id="cedula" placeholder="C√©dula">
      <input type="text" id="telefono" placeholder="Tel√©fono">
      <input type="text" id="ciudad" placeholder="Ciudad">
      <button class="boton" onclick="registrarPersona()">Registrar</button>
    </div>

    <!-- Formulario de edici√≥n oculto -->
    <div id="formulario-edicion" style="display:none; text-align:center;">
      <h3>Editar Persona</h3>
      <input type="hidden" id="edit-id">
      <input type="text" id="edit-nombre" placeholder="Nombre">
      <input type="text" id="edit-apellido" placeholder="Apellido">
      <input type="text" id="edit-cedula" placeholder="C√©dula">
      <input type="text" id="edit-telefono" placeholder="Tel√©fono">
      <input type="text" id="edit-ciudad" placeholder="Ciudad">
      <button class="boton" onclick="guardarEdicion()">Guardar</button>
      <button class="boton" onclick="cancelarEdicion()">Cancelar</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>C√©dula</th>
          <th>Tel√©fono</th>
          <th>Ciudad</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="tabla-personas"></tbody>
    </table>

    <div class="paginacion" id="paginacion"></div>
    <div style="text-align:center;">
      <button class="boton" onclick="volverDesdePersonas()">üîô Volver atr√°s</button>
    </div>
  </section>

  <!-- Agrega una nueva secci√≥n para MOTOS/TALLER -->
  <section id="seccion-motos-taller" style="display:none;">
    <h2 style="text-align:center;">üèçÔ∏è Motos/Taller</h2>

    <div id="formulario-moto" style="text-align:center; margin-bottom:20px;">
      <input type="text" id="moto-nombre" placeholder="Nombre">
      <input type="text" id="moto-apellido" placeholder="Apellido">
      <input type="text" id="moto-cedula" placeholder="C√©dula">
      <input type="text" id="moto-telefono" placeholder="Tel√©fono">
      <input type="text" id="moto-placa" placeholder="Placa">
      <button class="boton" onclick="registrarMoto()">Registrar Moto</button>
    </div>

    <div id="formulario-edicion-moto" style="display:none; text-align:center;">
      <h3>Editar Moto/Taller</h3>
      <input type="hidden" id="edit-moto-id">
      <input type="text" id="edit-moto-nombre" placeholder="Nombre">
      <input type="text" id="edit-moto-apellido" placeholder="Apellido">
      <input type="text" id="edit-moto-cedula" placeholder="C√©dula">
      <input type="text" id="edit-moto-telefono" placeholder="Tel√©fono">
      <input type="text" id="edit-moto-placa" placeholder="Placa">
      <button class="boton" onclick="guardarEdicionMoto()">Guardar</button>
      <button class="boton" onclick="cancelarEdicionMoto()">Cancelar</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>C√©dula</th>
          <th>Tel√©fono</th>
          <th>Placa</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="tabla-motos"></tbody>
    </table>

    <div class="paginacion" id="paginacion-motos"></div>
    <div style="text-align:center;">
      <button class="boton" onclick="volverDesdeMotosTaller()">üîô Volver atr√°s</button>
    </div>
  </section>

  <audio id="sonido-click" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b6c_1.mp3"></audio>
  <script>
    // Reproduce sonido al hacer click en cualquier bot√≥n
    document.addEventListener("DOMContentLoaded", function() {
      const sonido = document.getElementById("sonido-click");
      document.querySelectorAll("button").forEach(btn => {
        btn.addEventListener("click", () => {
          sonido.currentTime = 0;
          sonido.play();
        });
      });
    });

    // 1. Cargar personas desde localStorage al iniciar
    let personas = JSON.parse(localStorage.getItem("personas")) || [
      { id: 1, nombre: "Carlos", apellido: "Perez", cedula: "1000123456", telefono: "3210001111", ciudad: "Pereira" },
    ];

    // Motos/Taller data
    let motos = JSON.parse(localStorage.getItem("motos")) || [
      { id: 1, nombre: "Juan", apellido: "Gomez", cedula: "1000111111", telefono: "3221112222", placa: "ABC123" },
    ];
    let currentPageMotos = 1;
    const rowsPerPageMotos = 5;

    let currentPage = 1;
    const rowsPerPage = 5;

    function abrirModal() {
      document.getElementById("modal").style.display = "block";
      document.getElementById("password").value = "";
      document.getElementById("mensaje-error").textContent = "";
    }

    function cerrarModal() {
      document.getElementById("modal").style.display = "none";
    }

    function verificarPassword() {
      const pass = document.getElementById("password").value;
      if (pass === "1234") {
        cerrarModal();
        document.getElementById("contenido-principal").style.display = "none";
        document.getElementById("seccion-secreta").style.display = "block";
      } else {
        document.getElementById("mensaje-error").textContent = "‚ùå Contrase√±a incorrecta";
      }
    }

    function volverAtras() {
      document.getElementById("contenido-principal").style.display = "block";
      document.getElementById("seccion-secreta").style.display = "none";
    }

    function mostrarPersonas() {
      document.getElementById("seccion-secreta").style.display = "none";
      document.getElementById("seccion-personas").style.display = "block";
      renderTabla();
    }

    function volverDesdePersonas() {
      document.getElementById("seccion-personas").style.display = "none";
      document.getElementById("seccion-secreta").style.display = "block";
    }

    // Mostrar tabla de motos/taller al entrar en la secci√≥n
    function mostrarMotosTaller() {
      document.getElementById("seccion-secreta").style.display = "none";
      document.getElementById("seccion-motos-taller").style.display = "block";
      renderTablaMotos();
    }

    function volverDesdeMotosTaller() {
      document.getElementById("seccion-motos-taller").style.display = "none";
      document.getElementById("seccion-secreta").style.display = "block";
    }

    // 2. Guardar personas en localStorage cada vez que se modifica
    function guardarPersonas() {
      localStorage.setItem("personas", JSON.stringify(personas));
    }

    function registrarPersona() {
      const nombre = document.getElementById("nombre").value;
      const apellido = document.getElementById("apellido").value;
      const cedula = document.getElementById("cedula").value;
      const telefono = document.getElementById("telefono").value;
      const ciudad = document.getElementById("ciudad").value;

      if (nombre && apellido && cedula && telefono && ciudad) {
        const nueva = {
          id: personas.length ? personas[personas.length - 1].id + 1 : 1,
          nombre, apellido, cedula, telefono, ciudad
        };
        personas.push(nueva);
        guardarPersonas(); // <--- Guarda en localStorage
        limpiarFormulario();
        renderTabla();
      } else {
        alert("Por favor completa todos los campos.");
      }
    }

    function limpiarFormulario() {
      document.getElementById("nombre").value = "";
      document.getElementById("apellido").value = "";
      document.getElementById("cedula").value = "";
      document.getElementById("telefono").value = "";
      document.getElementById("ciudad").value = "";
    }

    function renderTabla() {
      const inicio = (currentPage - 1) * rowsPerPage;
      const fin = inicio + rowsPerPage;
      const visibles = personas.slice(inicio, fin);

      const cuerpo = visibles.map(p =>
        `<tr>
          <td>${p.id}</td>
          <td>${p.nombre}</td>
          <td>${p.apellido}</td>
          <td>${p.cedula}</td>
          <td>${p.telefono}</td>
          <td>${p.ciudad}</td>
          <td class="acciones">
            <button onclick="editarPersona(${p.id})">Editar</button>
            <button onclick="borrarPersona(${p.id})">Borrar</button>
          </td>
        </tr>`
      ).join("");

      document.getElementById("tabla-personas").innerHTML = cuerpo;
      renderPaginacion();
    }

    function editarPersona(id) {
      const persona = personas.find(p => p.id === id);
      if (persona) {
        document.getElementById("formulario-edicion").style.display = "block";
        document.getElementById("formulario-registro").style.display = "none";
        document.getElementById("edit-id").value = persona.id;
        document.getElementById("edit-nombre").value = persona.nombre;
        document.getElementById("edit-apellido").value = persona.apellido;
        document.getElementById("edit-cedula").value = persona.cedula;
        document.getElementById("edit-telefono").value = persona.telefono;
        document.getElementById("edit-ciudad").value = persona.ciudad;
      }
    }

    function guardarEdicion() {
      const id = parseInt(document.getElementById("edit-id").value);
      const nombre = document.getElementById("edit-nombre").value;
      const apellido = document.getElementById("edit-apellido").value;
      const cedula = document.getElementById("edit-cedula").value;
      const telefono = document.getElementById("edit-telefono").value;
      const ciudad = document.getElementById("edit-ciudad").value;

      const persona = personas.find(p => p.id === id);
      if (persona && nombre && apellido && cedula && telefono && ciudad) {
        persona.nombre = nombre;
        persona.apellido = apellido;
        persona.cedula = cedula;
        persona.telefono = telefono;
        persona.ciudad = ciudad;
        guardarPersonas(); // <--- Guarda en localStorage
        document.getElementById("formulario-edicion").style.display = "none";
        document.getElementById("formulario-registro").style.display = "block";
        renderTabla();
      } else {
        alert("Por favor completa todos los campos.");
      }
    }

    function cancelarEdicion() {
      document.getElementById("formulario-edicion").style.display = "none";
      document.getElementById("formulario-registro").style.display = "block";
    }

    function borrarPersona(id) {
      if (confirm("¬øEst√°s seguro de borrar esta persona?")) {
        personas = personas.filter(p => p.id !== id);
        guardarPersonas(); // <--- Guarda en localStorage
        renderTabla();
      }
    }

    function renderPaginacion() {
      const total = Math.ceil(personas.length / rowsPerPage);
      let botones = "";
      for (let i = 1; i <= total; i++) {
        botones += `<button class="${i === currentPage ? 'activo' : ''}" onclick="cambiarPagina(${i})">${i}</button>`;
      }
      document.getElementById("paginacion").innerHTML = botones;
    }

    function cambiarPagina(pag) {
      currentPage = pag;
      renderTabla();
    }

    function registrarMoto() {
      const nombre = document.getElementById("moto-nombre").value;
      const apellido = document.getElementById("moto-apellido").value;
      const cedula = document.getElementById("moto-cedula").value;
      const telefono = document.getElementById("moto-telefono").value;
      const placa = document.getElementById("moto-placa").value;

      if (nombre && apellido && cedula && telefono && placa) {
        const nueva = {
          id: motos.length ? motos[motos.length - 1].id + 1 : 1,
          nombre, apellido, cedula, telefono, placa
        };
        motos.push(nueva);
        guardarMotos();
        limpiarFormularioMoto();
        renderTablaMotos();
      } else {
        alert("Por favor completa todos los campos.");
      }
    }

    function limpiarFormularioMoto() {
      document.getElementById("moto-nombre").value = "";
      document.getElementById("moto-apellido").value = "";
      document.getElementById("moto-cedula").value = "";
      document.getElementById("moto-telefono").value = "";
      document.getElementById("moto-placa").value = "";
    }

    function guardarMotos() {
      localStorage.setItem("motos", JSON.stringify(motos));
    }

    function renderTablaMotos() {
      const inicio = (currentPageMotos - 1) * rowsPerPageMotos;
      const fin = inicio + rowsPerPageMotos;
      const visibles = motos.slice(inicio, fin);

      const cuerpo = visibles.map(m =>
        `<tr>
          <td>${m.id}</td>
          <td>${m.nombre}</td>
          <td>${m.apellido}</td>
          <td>${m.cedula}</td>
          <td>${m.telefono}</td>
          <td>${m.placa}</td>
          <td class="acciones">
            <button onclick="editarMoto(${m.id})">Editar</button>
            <button onclick="borrarMoto(${m.id})">Borrar</button>
          </td>
        </tr>`
      ).join("");

      document.getElementById("tabla-motos").innerHTML = cuerpo;
      renderPaginacionMotos();
    }

    function editarMoto(id) {
      const moto = motos.find(m => m.id === id);
      if (moto) {
        document.getElementById("formulario-edicion-moto").style.display = "block";
        document.getElementById("formulario-moto").style.display = "none";
        document.getElementById("edit-moto-id").value = moto.id;
        document.getElementById("edit-moto-nombre").value = moto.nombre;
        document.getElementById("edit-moto-apellido").value = moto.apellido;
        document.getElementById("edit-moto-cedula").value = moto.cedula;
        document.getElementById("edit-moto-telefono").value = moto.telefono;
        document.getElementById("edit-moto-placa").value = moto.placa;
      }
    }

    function guardarEdicionMoto() {
      const id = parseInt(document.getElementById("edit-moto-id").value);
      const nombre = document.getElementById("edit-moto-nombre").value;
      const apellido = document.getElementById("edit-moto-apellido").value;
      const cedula = document.getElementById("edit-moto-cedula").value;
      const telefono = document.getElementById("edit-moto-telefono").value;
      const placa = document.getElementById("edit-moto-placa").value;

      const moto = motos.find(m => m.id === id);
      if (moto && nombre && apellido && cedula && telefono && placa) {
        moto.nombre = nombre;
        moto.apellido = apellido;
        moto.cedula = cedula;
        moto.telefono = telefono;
        moto.placa = placa;
        guardarMotos();
        document.getElementById("formulario-edicion-moto").style.display = "none";
        document.getElementById("formulario-moto").style.display = "block";
        renderTablaMotos();
      } else {
        alert("Por favor completa todos los campos.");
      }
    }

    function cancelarEdicionMoto() {
      document.getElementById("formulario-edicion-moto").style.display = "none";
      document.getElementById("formulario-moto").style.display = "block";
    }

    function borrarMoto(id) {
      if (confirm("¬øEst√°s seguro de borrar esta moto/taller?")) {
        motos = motos.filter(m => m.id !== id);
        guardarMotos();
        renderTablaMotos();
      }
    }

    function renderPaginacionMotos() {
      const total = Math.ceil(motos.length / rowsPerPageMotos);
      let botones = "";
      for (let i = 1; i <= total; i++) {
        botones += `<button class="${i === currentPageMotos ? 'activo' : ''}" onclick="cambiarPaginaMotos(${i})">${i}</button>`;
      }
      document.getElementById("paginacion-motos").innerHTML = botones;
    }

    function cambiarPaginaMotos(pag) {
      currentPageMotos = pag;
      renderTablaMotos();
    }

    tsParticles.load("tsparticles", {
      fpsLimit: 120,
      background: { color: "#000000" },
      particles: {
        number: { value: 120, density: { enable: true, area: 800 } }, // M√°s part√≠culas
        color: { value: ["#ff0000", "#00cfff", "#ffffff"] }, // Colores variados
        shape: { type: ["circle", "star"] }, // Formas variadas
        opacity: { value: 0.7, random: true },
        size: { value: 4, random: true },
        links: {
          enable: true,
          distance: 120,
          color: "#00cfff",
          opacity: 0.5,
          width: 2
        },
        move: {
          enable: true,
          speed: 2,
          direction: "none",
          outModes: { default: "bounce" }
        }
      },
      interactivity: {
        events: {
          onHover: { enable: true, mode: "repulse" },
          resize: true
        },
        modes: { repulse: { distance: 100 } }
      },
      detectRetina: true
    });
  </script>
</body>
</html>
