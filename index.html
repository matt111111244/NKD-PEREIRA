<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz Final: Cuidado y Seguridad del PC</title>
<style>
  /* -------- Animated theme / motion system -------- */
  :root{
    --bg1:#041226; --accent:#47a7ff; --accent2:#7ee7c7;
    --accent-bright:#2ee0ff;
    --good:#dff7e8; --good-border: rgba(75,210,140,0.18);
    --bad:#f8d7da; --card:rgba(255,255,255,0.03);
    --text:#e6eef8; --glass: rgba(255,255,255,0.03);
    --danger:#ff6b6b;
    --motion-fast: 160ms;
    --motion-medium: 320ms;
    --motion-slow: 600ms;
    --ease: cubic-bezier(.2,.9,.25,1);
  }

  /* base */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:"Segoe UI", Roboto, Arial, sans-serif;
    color:var(--text); padding:36px 12px; cursor: crosshair;
    background:
      radial-gradient(1200px 600px at 10% 10%, rgba(46,224,255,0.04), transparent),
      radial-gradient(900px 400px at 90% 90%, rgba(126,231,199,0.02), transparent),
      linear-gradient(135deg,#021032 0%, #052a4a 60%);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    transition: background 900ms var(--ease), color 450ms var(--ease);
  }

  /* subtle page load flourish */
  .wrap{
    max-width:980px; margin:14px auto; padding:26px;
    border-radius:14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 18px 48px rgba(2,8,23,0.6);
    border:1px solid rgba(255,255,255,0.03);
    transform-origin: center top;
    animation: wrapEntrance 720ms var(--ease) both;
    will-change: transform, opacity;
  }
  @keyframes wrapEntrance {
    from { transform: translateY(14px) scale(.995); opacity:0 }
    to   { transform: translateY(0) scale(1); opacity:1 }
  }

  .topline{ text-align:center; font-weight:700; color:rgba(210,238,248,0.9); margin-bottom:12px; font-size:0.98rem; letter-spacing:0.3px; }

  header{display:flex;align-items:center;gap:14px;margin-bottom:12px; transform-origin:left center}
  .logo{width:60px;height:60px;border-radius:12px;background:linear-gradient(135deg,var(--accent), #7b61ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:#031026;transform:rotate(-6deg); box-shadow: 0 8px 30px rgba(71,167,255,0.08)}
  h1{margin:0;font-size:1.4rem; letter-spacing: .2px; }
  .lead{margin:6px 0 0;color:rgba(230,238,248,0.85);font-size:0.95rem}
  .note{font-size:0.92rem;color:rgba(230,238,248,0.82);margin:10px 0 14px}

  /* QUESTIONS: card motion and subtle micro-interactions */
  .question{
    background:var(--card);
    padding:12px;border-radius:12px;margin-bottom:14px;
    border:1px solid rgba(255,255,255,0.02);
    transition: transform var(--motion-medium) var(--ease), box-shadow var(--motion-medium) var(--ease), filter var(--motion-medium);
    will-change: transform, box-shadow;
    transform: translateZ(0);
    position:relative;
    overflow:visible;
    opacity: 0;
    animation: questionIn .6s var(--ease) both;
  }
  .question.enter{ /* JS will add staggered transitionDelay */ }
  @keyframes questionIn {
    from { opacity:0; transform: translateY(18px) scale(.996) }
    to   { opacity:1; transform: translateY(0) scale(1) }
  }
  .question.lift{ transform: translateY(-12px) scale(1.01); box-shadow:0 28px 68px rgba(2,8,23,0.65); filter:brightness(1.02); }

  .question h3{margin:0 0 8px;font-size:1rem; transition: color var(--motion-fast) var(--ease) }

  .answers label{
    display:block; padding:12px 16px; border-radius:10px; margin:10px 0; cursor:pointer;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.002));
    border:1px solid rgba(255,255,255,0.03);
    transition: background var(--motion-fast) var(--ease), transform var(--motion-fast) var(--ease), box-shadow var(--motion-fast) var(--ease), border-color var(--motion-fast);
    position:relative; user-select:none;
    transform-origin:left center;
  }

  /* hover micro-motion & sheen */
  .answers label:hover{
    transform: translateX(8px) scale(1.01);
    box-shadow: 0 16px 40px rgba(46,224,255,0.06);
    background: linear-gradient(90deg, rgba(46,224,255,0.06), rgba(71,167,255,0.03));
  }
  .answers label::before{
    content:""; position:absolute; left:-6px; top:0; bottom:0; width:6px; border-top-left-radius:10px; border-bottom-left-radius:10px;
    background: linear-gradient(180deg, rgba(46,224,255,0.14), rgba(71,167,255,0.06)); transform: scaleY(0); transform-origin:center; transition: transform var(--motion-fast);
    pointer-events:none; opacity:0.0;
  }
  .answers label:hover::before{ transform: scaleY(1); opacity:1; }

  /* focus support */
  .answers label:focus-within{ outline:none; box-shadow:0 10px 30px rgba(46,224,255,0.06) }

  .answers input{margin-right:12px; transform:translateY(1px); accent-color: var(--accent); }

  /* selected state - bright gentle green */
  .answers label.selected{
    background: linear-gradient(90deg, rgba(223,247,232,0.98), rgba(223,247,232,0.72));
    border: 1px solid var(--good-border);
    box-shadow: 0 12px 36px rgba(75,210,140,0.08), inset 0 0 18px rgba(46,224,255,0.02);
    color: #042916;
    transform: translateX(2px) scale(1.005);
  }

  /* result states */
  .correct{ background: linear-gradient(90deg, rgba(223,247,232,0.98), rgba(223,247,232,0.78)) !important; border-color: var(--good-border) !important; box-shadow:0 14px 36px rgba(75,210,140,0.08) !important; }
  .incorrect{ background: linear-gradient(90deg, rgba(255,235,235,0.98), rgba(255,220,220,0.86)) !important; box-shadow:0 12px 36px rgba(255,107,107,0.06) !important; border-color: rgba(255,107,107,0.08) !important; }

  /* small micro-animations for buttons/timer/result */
  .actions{display:flex;gap:12px;align-items:center;margin-top:16px}
  #submit-btn, #reset-btn{
    padding:12px 18px; border-radius:10px; border:0; font-weight:600;
    transition: transform var(--motion-fast) var(--ease), box-shadow var(--motion-fast);
    will-change: transform, box-shadow;
  }
  #submit-btn{
    background: linear-gradient(90deg,var(--accent), #7b61ff);
    color:#031026; box-shadow:0 12px 40px rgba(71,167,255,0.12);
  }
  #submit-btn:hover{ transform: translateY(-6px) scale(1.02); box-shadow:0 26px 60px rgba(71,167,255,0.16) }
  #submit-btn:active{ transform: translateY(-2px) scale(.995) }
  #reset-btn{
    background: transparent; border:1px solid rgba(255,255,255,0.06); color:var(--text);
  }
  #submit-btn:disabled{ opacity:0.5; cursor:not-allowed; transform:none; box-shadow:none }

  #result{
    margin-top:16px; padding:14px; border-radius:12px;
    background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.02);
    transform-origin:center; animation: resultPop .42s var(--ease) both;
  }
  @keyframes resultPop { from { transform: translateY(8px) scale(.995); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }

  /* TIMER pulse */
  .timer-row { display:flex; justify-content:center; margin-bottom:8px; }
  #timer{
    font-weight:700; font-size:0.98rem; padding:8px 12px; border-radius:10px;
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.03); color:var(--text);
    box-shadow:0 8px 24px rgba(2,8,23,0.36); min-width:110px; text-align:center;
    transition: transform var(--motion-medium) var(--ease), box-shadow var(--motion-medium);
  }
  #timer.warn{
    color:var(--danger); box-shadow:0 12px 34px rgba(255,107,107,0.14);
    animation: timerPulse 900ms ease-in-out infinite;
  }
  @keyframes timerPulse {
    0% { transform: scale(1) }
    50% { transform: scale(1.06) rotate(-0.6deg) }
    100% { transform: scale(1) }
  }

  /* overlay animations */
  .timeout-overlay{
    transition: opacity var(--motion-medium) var(--ease), transform var(--motion-medium) var(--ease);
    transform: translateY(6px);
  }
  .timeout-overlay.show{ transform: translateY(0); }

  /* custom cursor (hidden on mobile) - small animation */
  .custom-cursor{ display:block; position:fixed; left:0; top:0; width:14px; height:14px; border-radius:50%; background:var(--accent2); box-shadow:0 6px 18px rgba(46,224,255,0.12); pointer-events:none; transform:translate(-50%,-50%) scale(1); transition: transform 140ms var(--ease), box-shadow 160ms; z-index:9999; }
  .custom-cursor.enlarge{ transform: translate(-50%,-50%) scale(2.2); box-shadow:0 18px 48px rgba(46,224,255,0.22); }
  .custom-cursor.click{ transform: translate(-50%,-50%) scale(1.6); transition: transform 80ms ease-out; }

  /* decorative sheen across the header logo */
  .logo::after{
    content:""; position:absolute; inset:0; border-radius:12px; pointer-events:none;
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    mix-blend-mode: overlay; opacity:0.9; transform: translateX(-120%);
    animation: sheen 2.6s linear infinite;
  }
  @keyframes sheen { 0% { transform: translateX(-120%) } 100% { transform: translateX(120%) } }

  /* responsive adjustments */
  @media (max-width:720px){
    header{flex-direction:column;align-items:flex-start}
    .custom-cursor{ display:none } body{ cursor:auto }
    .answers label{ padding:10px }
  }
</style>
</head>
<body>
  <div class="wrap">
    <!-- Timer above copyright -->
    <div class="timer-row">
      <div id="timer" aria-live="polite">04:30</div>
    </div>

    <div class="topline">© Mateo — Creador | Profe Martha</div>

    <header>
      <div class="logo">PC</div>
      <div>
        <h1>Quiz: Cuidado y Seguridad del PC</h1>
        <p class="lead">25 preguntas — una vez marcada la respuesta, no se puede cambiar. Al enviar verás aciertos y fallos con colores.</p>
      </div>
    </header>

    <form id="quizForm" autocomplete="off">
      <p class="note">Selecciona una opción por pregunta. Cada pregunta se bloqueará al seleccionar.</p>

      <!-- Preguntas 1..25 -->
      <div class="question" id="q1-box">
        <h3>1. ¿Cómo contribuir efectivamente a que el lugar de trabajo sea seguro para las personas?</h3>
        <div class="answers">
          <label><input type="radio" name="q1" value="a"> Organizar el lugar de trabajo, no consumir alimentos o bebidas</label>
          <label><input type="radio" name="q1" value="b"> Mantener el equipo en un lugar limpio y seco</label>
          <label><input type="radio" name="q1" value="c"> Evitar moverse dentro de la sala</label>
          <label><input type="radio" name="q1" value="d"> Todas las anteriores</label>
          <label><input type="radio" name="q1" value="e"> Ninguna de las anteriores</label>
        </div>
      </div>

      <div class="question" id="q2-box">
        <h3>2. ¿Qué requiere la computadora para mantenerse en buen estado?</h3>
        <div class="answers">
          <label><input type="radio" name="q2" value="a"> Tener a la mano productos de limpieza como límpido</label>
          <label><input type="radio" name="q2" value="b"> Tener el escritorio lleno de íconos</label>
          <label><input type="radio" name="q2" value="c"> Un encendido, uso adecuado y apagado correcto</label>
        </div>
      </div>

      <div class="question" id="q3-box">
        <h3>3. ¿Qué medidas se emplean para resguardar la información?</h3>
        <div class="answers">
          <label><input type="radio" name="q3" value="a"> Usar protección contra variaciones de corriente</label>
          <label><input type="radio" name="q3" value="b"> Mantener el antivirus actualizado</label>
          <label><input type="radio" name="q3" value="c"> Aceptar todos los regalos en línea</label>
          <label><input type="radio" name="q3" value="d"> Todas las anteriores</label>
        </div>
      </div>

      <div class="question" id="q4-box">
        <h3>4. ¿Por qué es importante seguir recomendaciones para cuidar los equipos?</h3>
        <div class="answers">
          <label><input type="radio" name="q4" value="a"> Para que se dañen más rápido</label>
          <label><input type="radio" name="q4" value="b"> Detectar rápidamente sobrevoltajes</label>
          <label><input type="radio" name="q4" value="c"> Cuidar la vida útil y aprovecharlos más tiempo</label>
        </div>
      </div>

      <div class="question" id="q5-box">
        <h3>5. ¿En dónde se deben usar los computadores para mantenerlos seguros?</h3>
        <div class="answers">
          <label><input type="radio" name="q5" value="a"> Dejarlo en cualquier parte</label>
          <label><input type="radio" name="q5" value="b"> En oficinas, alejándolos del polvo y corrientes de aire</label>
          <label><input type="radio" name="q5" value="c"> Al aire libre</label>
        </div>
      </div>

      <div class="question" id="q6-box">
        <h3>6. ¿Qué recomendaciones hay para el buen uso de Internet?</h3>
        <div class="answers">
          <label><input type="radio" name="q6" value="a"> No descargar programas desconocidos</label>
          <label><input type="radio" name="q6" value="b"> No aceptar regalos en línea</label>
          <label><input type="radio" name="q6" value="c"> Todas las anteriores</label>
        </div>
      </div>

      <div class="question" id="q7-box">
        <h3>7. ¿Cuáles son los dos tipos de mantenimiento para la computadora?</h3>
        <div class="answers">
          <label><input type="radio" name="q7" value="a"> Facebook y WhatsApp</label>
          <label><input type="radio" name="q7" value="b"> Hardware y Software</label>
        </div>
      </div>

      <div class="question" id="q8-box">
        <h3>8. ¿Cómo se apaga correctamente una computadora?</h3>
        <div class="answers">
          <label><input type="radio" name="q8" value="a"> Apagar con el interruptor directamente (nunca hacerlo)</label>
          <label><input type="radio" name="q8" value="b"> Apagar desde Windows y esperar que cierre</label>
          <label><input type="radio" name="q8" value="c"> Solo pararse y dejarla encendida</label>
        </div>
      </div>

      <div class="question" id="q9-box">
        <h3>9. ¿Qué es lo primero que debes hacer antes de limpiar un computador?</h3>
        <div class="answers">
          <label><input type="radio" name="q9" value="a"> Limpiarlo mientras está encendido</label>
          <label><input type="radio" name="q9" value="b"> Apagarlo y desconectarlo de la corriente</label>
          <label><input type="radio" name="q9" value="c"> Mojar la pantalla</label>
        </div>
      </div>

      <div class="question" id="q10-box">
        <h3>10. ¿Qué elemento NO se debe usar para limpiar una computadora?</h3>
        <div class="answers">
          <label><input type="radio" name="q10" value="a"> Paño de microfibra</label>
          <label><input type="radio" name="q10" value="b"> Alcohol isopropílico</label>
          <label><input type="radio" name="q10" value="c"> Agua directamente sobre el teclado</label>
        </div>
      </div>

      <div class="question" id="q11-box">
        <h3>11. ¿Por qué es importante tener un antivirus actualizado?</h3>
        <div class="answers">
          <label><input type="radio" name="q11" value="a"> Para proteger contra virus y programas maliciosos</label>
          <label><input type="radio" name="q11" value="b"> Para que el PC funcione más lento</label>
          <label><input type="radio" name="q11" value="c"> No es importante</label>
        </div>
      </div>

      <div class="question" id="q12-box">
        <h3>12. ¿Qué se debe evitar al usar una laptop?</h3>
        <div class="answers">
          <label><input type="radio" name="q12" value="a"> Usarla sobre una cama o almohada</label>
          <label><input type="radio" name="q12" value="b"> Colocarla en superficie plana y ventilada</label>
          <label><input type="radio" name="q12" value="c"> Conectarla a un regulador</label>
        </div>
      </div>

      <div class="question" id="q13-box">
        <h3>13. ¿Qué sucede si no actualizamos el sistema operativo?</h3>
        <div class="answers">
          <label><input type="radio" name="q13" value="a"> Nada, funciona igual</label>
          <label><input type="radio" name="q13" value="b"> Puede ser más vulnerable a ataques o errores</label>
          <label><input type="radio" name="q13" value="c"> Se apaga automáticamente</label>
        </div>
      </div>

      <div class="question" id="q14-box">
        <h3>14. ¿Qué debes hacer si notas ruidos extraños o sobrecalentamiento?</h3>
        <div class="answers">
          <label><input type="radio" name="q14" value="a"> Ignorarlo</label>
          <label><input type="radio" name="q14" value="b"> Apagar y revisar o llevar a mantenimiento</label>
          <label><input type="radio" name="q14" value="c"> Golpearlo suavemente</label>
        </div>
      </div>

      <div class="question" id="q15-box">
        <h3>15. ¿Cuál es una buena práctica para mantener limpio el escritorio del sistema?</h3>
        <div class="answers">
          <label><input type="radio" name="q15" value="a"> Llenarlo de accesos directos</label>
          <label><input type="radio" name="q15" value="b"> Mantener solo los accesos necesarios</label>
          <label><input type="radio" name="q15" value="c"> No borrar nunca nada</label>
        </div>
      </div>

      <div class="question" id="q16-box">
        <h3>16. ¿Qué debes evitar mientras comes o bebes cerca del PC?</h3>
        <div class="answers">
          <label><input type="radio" name="q16" value="a"> Comer o beber directamente sobre el teclado</label>
          <label><input type="radio" name="q16" value="b"> Tener cuidado y poner vaso alejado</label>
          <label><input type="radio" name="q16" value="c"> Usar cubiertos de plástico</label>
        </div>
      </div>

      <div class="question" id="q17-box">
        <h3>17. ¿Cada cuánto es recomendable hacer mantenimiento preventivo?</h3>
        <div class="answers">
          <label><input type="radio" name="q17" value="a"> Cada semana</label>
          <label><input type="radio" name="q17" value="b"> Cada 6 meses o según uso</label>
          <label><input type="radio" name="q17" value="c"> Nunca</label>
        </div>
      </div>

      <div class="question" id="q18-box">
        <h3>18. ¿Qué ayuda a prolongar la vida útil de la batería de una laptop?</h3>
        <div class="answers">
          <label><input type="radio" name="q18" value="a"> Dejarla conectada todo el tiempo</label>
          <label><input type="radio" name="q18" value="b"> Usarla con batería y conectar solo cuando necesario</label>
          <label><input type="radio" name="q18" value="c"> Descargarla completamente siempre</label>
        </div>
      </div>

      <div class="question" id="q19-box">
        <h3>19. ¿Qué debes hacer antes de abrir una caja o archivo adjunto inesperado?</h3>
        <div class="answers">
          <label><input type="radio" name="q19" value="a"> Abrir inmediatamente</label>
          <label><input type="radio" name="q19" value="b"> Verificar remitente y escanear con antivirus</label>
          <label><input type="radio" name="q19" value="c"> Reenviarlo a todos</label>
        </div>
      </div>

      <div class="question" id="q20-box">
        <h3>20. ¿Qué dispositivo protege contra picos de tensión y cortes breves de energía?</h3>
        <div class="answers">
          <label><input type="radio" name="q20" value="a"> Protector de sobretensiones / UPS</label>
          <label><input type="radio" name="q20" value="b"> Cargador de teléfono</label>
          <label><input type="radio" name="q20" value="c"> Cable HDMI</label>
        </div>
      </div>

      <div class="question" id="q21-box">
        <h3>21. ¿Cuál es una buena práctica para contraseñas?</h3>
        <div class="answers">
          <label><input type="radio" name="q21" value="a"> Usar la misma contraseña en todos lados</label>
          <label><input type="radio" name="q21" value="b"> Usar contraseñas fuertes y diferentes, y un gestor</label>
          <label><input type="radio" name="q21" value="c"> Compartir contraseñas por email</label>
        </div>
      </div>

      <div class="question" id="q22-box">
        <h3>22. ¿Qué estrategia ayuda a recuperar datos ante fallos?</h3>
        <div class="answers">
          <label><input type="radio" name="q22" value="a"> No hacer copias y confiar en el disco</label>
          <label><input type="radio" name="q22" value="b"> Hacer backups en disco externo y nube</label>
          <label><input type="radio" name="q22" value="c"> Borrar versiones antiguas siempre</label>
        </div>
      </div>

      <div class="question" id="q23-box">
        <h3>23. ¿Qué se recomienda para disipación de calor en desktop?</h3>
        <div class="answers">
          <label><input type="radio" name="q23" value="a"> Tapar las salidas de aire</label>
          <label><input type="radio" name="q23" value="b"> Mantener salidas de aire libres y limpiar polvo</label>
          <label><input type="radio" name="q23" value="c"> Ponerlo dentro de un armario cerrado</label>
        </div>
      </div>

      <div class="question" id="q24-box">
        <h3>24. ¿Qué tipo de limpiador es seguro para pantalla (LCD/LED)?</h3>
        <div class="answers">
          <label><input type="radio" name="q24" value="a"> Limpiador especial para pantallas o paño de microfibra ligeramente humedecido</label>
          <label><input type="radio" name="q24" value="b"> Limpiador de vidrios con amoníaco</label>
          <label><input type="radio" name="q24" value="c"> Agua caliente y jabón</label>
        </div>
      </div>

      <div class="question" id="q25-box">
        <h3>25. ¿Qué debes hacer si un programa solicita permisos extraños o te pide datos personales sin motivo?</h3>
        <div class="answers">
          <label><input type="radio" name="q25" value="a"> Dar permisos sin leer</label>
          <label><input type="radio" name="q25" value="b"> Rechazar, investigar y escanear con antivirus</label>
          <label><input type="radio" name="q25" value="c"> Compartir en redes</label>
        </div>
      </div>

      <div class="actions">
        <button type="button" id="submit-btn">Enviar respuestas</button>
        <button type="button" id="reset-btn">Reiniciar quiz</button>
        <div style="margin-left:auto" class="small">25 preguntas — selección bloqueada</div>
      </div>
    </form>

    <div id="result" style="display:none"></div>
  </div>

  <!-- timeout overlay -->
  <div class="timeout-overlay" id="timeoutOverlay" role="alert" aria-hidden="true">
    <div class="timeout-card">
      <div class="timeout-emoji">😢</div>
      <div class="timeout-text">No pudiste resolverlo a tiempo...</div>
    </div>
  </div>

  <!-- custom cursor element -->
  <div class="custom-cursor" id="customCursor" aria-hidden="true"></div>

<script>
  // Respuestas correctas
  const correctAnswers = {
    q1:"d", q2:"c", q3:"b", q4:"c", q5:"b", q6:"c", q7:"b", q8:"b",
    q9:"b", q10:"c", q11:"a", q12:"a", q13:"b", q14:"b", q15:"b", q16:"a",
    q17:"b", q18:"b", q19:"b", q20:"a", q21:"b", q22:"b", q23:"b", q24:"a", q25:"b"
  };

  // ---- TIMER ----
  const START_SECONDS = 270; // 4:30 = 270s
  let timeLeft = START_SECONDS;
  let timerInterval = null;
  const timerEl = document.getElementById('timer');
  const overlayEl = document.getElementById('timeoutOverlay');
  const submitBtn = document.getElementById('submit-btn');

  function formatTime(s){
    const mm = Math.floor(s/60).toString().padStart(2,'0');
    const ss = (s%60).toString().padStart(2,'0');
    return `${mm}:${ss}`;
  }

  function updateTimerUI(){
    timerEl.textContent = formatTime(timeLeft);
    if(timeLeft <= 30){
      timerEl.classList.add('warn');
    } else {
      timerEl.classList.remove('warn');
    }
  }

  function startTimer(){
    clearInterval(timerInterval);
    timeLeft = START_SECONDS;
    updateTimerUI();
    timerInterval = setInterval(()=>{
      timeLeft--;
      updateTimerUI();
      if(timeLeft <= 0){
        clearInterval(timerInterval);
        handleTimeUp();
      }
    }, 1000);
  }

  function stopTimer(){
    clearInterval(timerInterval);
  }

  function handleTimeUp(){
    // disable inputs and show overlay
    document.querySelectorAll('input[type="radio"]').forEach(i=> i.disabled = true);
    submitBtn.disabled = true;
    overlayEl.classList.add('show');
    overlayEl.setAttribute('aria-hidden','false');

    // after 6 seconds hide overlay and reset quiz automatically
    setTimeout(()=>{
      overlayEl.classList.remove('show');
      overlayEl.setAttribute('aria-hidden','true');
      resetQuiz(true); // auto flag to avoid confirm
    }, 6000);
  }

  // --- Audio: beep corto usando WebAudio (no necesita archivos externos) ---
  let audioCtx = null;
  let masterGain = null;
  function ensureAudio() {
    if (audioCtx) return;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    masterGain = audioCtx.createGain();
    masterGain.gain.value = 0.08; // volumen general (ajusta aquí)
    masterGain.connect(audioCtx.destination);
  }

  function playSelectSound() {
    try {
      ensureAudio();
      const now = audioCtx.currentTime;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();

      // timbre y envolvente
      osc.type = 'sine';
      osc.frequency.setValueAtTime(880, now); // frecuencia inicial
      gain.gain.setValueAtTime(0.0001, now);
      gain.gain.exponentialRampToValueAtTime(1.0, now + 0.006);
      gain.gain.exponentialRampToValueAtTime(0.0001, now + 0.16);

      // conecta y reproduce breve tono
      osc.connect(gain);
      gain.connect(masterGain);
      osc.start(now);
      osc.stop(now + 0.18);

      // pequeño click extra (opcional): breve noise burst for crispness
      // const bufferSize = 2 * audioCtx.sampleRate;
      // const noise = audioCtx.createBufferSource();
      // const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      // const data = buffer.getChannelData(0);
      // for (let i = 0; i < bufferSize; i++) data[i] = (Math.random() * 2 - 1) * 0.02;
      // noise.buffer = buffer;
      // const ng = audioCtx.createGain();
      // ng.gain.setValueAtTime(0.06, now);
      // ng.gain.exponentialRampToValueAtTime(0.0001, now + 0.06);
      // noise.connect(ng);
      // ng.connect(masterGain);
      // noise.start(now);
      // noise.stop(now + 0.06);

    } catch (err) {
      // fallbacks silenciosos; evitar romper la UI si WebAudio no está disponible
      console.warn('Audio no disponible:', err);
    }
  }

  // ---- Selection behavior (modificado para reproducir sonido) ----
  document.querySelectorAll('input[type="radio"]').forEach(radio=>{
    radio.addEventListener('change',(e)=>{
      // reproducir sonido al elegir (crear AudioContext en la primera interacción)
      playSelectSound();

      const name = e.target.name;
      // remove 'selected' from all siblings
      document.querySelectorAll(`input[name="${name}"]`).forEach(i=>{
        const lab = i.closest('label');
        lab && lab.classList.remove('selected');
      });
      const selLabel = e.target.closest('label');
      selLabel && selLabel.classList.add('selected');

      // lock question choices
      document.querySelectorAll(`input[name="${name}"]`).forEach(i=> i.disabled = true);
    });
  });

  // hover lifts
  document.querySelectorAll('.answers label').forEach(label=>{
    label.addEventListener('mouseenter', (e)=>{
      const q = label.closest('.question');
      if(q) q.classList.add('lift');
      label.style.cursor = 'none';
    });
    label.addEventListener('mouseleave', (e)=>{
      const q = label.closest('.question');
      if(q) q.classList.remove('lift');
    });
    const input = label.querySelector('input[type="radio"]');
    if(input){
      input.addEventListener('focus', ()=> {
        const q = input.closest('.question');
        if(q) q.classList.add('lift');
      });
      input.addEventListener('blur', ()=> {
        const q = input.closest('.question');
        if(q) q.classList.remove('lift');
      });
    }
  });

  // ---- Submit logic ----
  submitBtn.addEventListener('click', ()=>{
    const total = 25;
    let score = 0;
    let wrong = 0;

    // stop timer
    stopTimer();

    // prevent double
    submitBtn.disabled = true;

    for(let i=1;i<=total;i++){
      const qName = 'q'+i;
      const selected = document.querySelector(`input[name="${qName}"]:checked`);
      if(selected){
        const selLabel = selected.closest('label');
        if(selected.value === correctAnswers[qName]){
          score++;
          selLabel && selLabel.classList.add('correct');
        } else {
          wrong++;
          selLabel && selLabel.classList.add('incorrect');
        }
      } else {
        wrong++;
      }
    }

    // disable all radios
    document.querySelectorAll('input[type="radio"]').forEach(i=> i.disabled = true);

    const nota = ((score / total) * 5).toFixed(1);
    const pct = score / total;
    let msg = '';
    if(pct === 1) msg = '🎉 Excelente';
    else if(pct >= 0.6) msg = '👍 Bien hecho';
    else msg = '🔔 Necesitas mejorar';

    const res = document.getElementById('result');
    res.style.display = 'block';
    res.innerHTML = `
      <div style="font-weight:700;font-size:1.06rem">Resultado</div>
      <div class="small" style="margin-top:6px">✅ Aciertos: ${score} / ${total} &nbsp;&nbsp; ❌ Fallos: ${wrong}</div>
      <div class="small" style="margin-top:6px">📘 Nota final: <strong>${nota} / 5.0</strong></div>
      <div style="margin-top:8px;font-weight:600">${msg}</div>
    `;
    res.scrollIntoView({behavior:'smooth', block:'center'});
  });

  // ---- Reset logic ----
  function resetQuiz(auto=false){
    // if auto=false, confirm
    if(!auto){
      if(!confirm('¿Reiniciar el quiz? Se borrarán todas las respuestas seleccionadas.')) return;
    }
    document.querySelectorAll('input[type="radio"]').forEach(i=>{
      i.checked = false;
      i.disabled = false;
      const lab = i.closest('label');
      lab && lab.classList.remove('correct','incorrect','selected');
    });
    document.getElementById('submit-btn').disabled = false;
    const res = document.getElementById('result');
    res.style.display = 'none';
    res.innerHTML = '';
    // restart timer
    startTimer();
    window.scrollTo({top:0, behavior:'smooth'});
  }

  document.getElementById('reset-btn').addEventListener('click', ()=> resetQuiz(false));

  // start timer on load
  startTimer();

  // ensure overlay hide on manual reset as well
  // (if user resets while overlay visible)
  const obs = new MutationObserver(()=>{
    if(!overlayEl.classList.contains('show')) return;
  });
  obs.observe(overlayEl, {attributes:true, attributeFilter:['class']});
</script>
</body>
</html>
