<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Página — Fondo Grid 3D</title>

  /* Fuente */
  @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

  <style>
    :root{
      --grid: 10rem;
      --amber-500: #f59e0b;
      --amber-400: #fbbf24;
      --amber-600: #d97706;
    }

    /* ====== fondo GRID (fijo, visible debajo de todo) ====== */
    .grid-container{
      --grid: 10rem;
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      perspective: 100rem;
      animation: rotate 100s linear infinite forwards;
      z-index: -2;
      pointer-events: none;
      overflow: hidden;
      background: #000; /* fallback */
    }

    .grid-container .plane{
      --dir: 1;
      width: 300%;
      height: 150%;
      min-height: 70rem;
      position: absolute;
      bottom: 0;
      transform-style: preserve-3d;
      transform-origin: bottom center;
      transform: translateX(-50%) rotateX(85deg);
      left: 50%;
    }

    /* segundo plano invertido */
    .grid-container .plane:last-child{
      --dir: -1;
      top: 0;
      transform-origin: top center;
      transform: translateX(-50%) rotateX(-85deg);
    }

    /* elemento interno (grid & glow) */
    .grid-container .plane > *{
      transform-style: preserve-3d;
      height: 100%;
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }

    /* líneas del grid */
    .grid-container .plane > .grid::before{
      content: '';
      display:block;
      position:absolute;
      width:100%;
      height:100%;
      top:0; left:0;
      background-image:
        repeating-linear-gradient(to left, green, green 4px, transparent 4px, transparent var(--grid)),
        repeating-linear-gradient(to bottom, green, green 4px, transparent 4px, transparent var(--grid));
      animation: move 1s linear infinite forwards;
      transform-origin: center;
      opacity: 0.55;
      mix-blend-mode: screen;
      filter: blur(0px);
    }

    /* overlay / fade (como en tu SASS &::after) */
    .grid-container .plane > .grid::after{
      content: '';
      display: block;
      position: absolute;
      width:100%;
      height:100%;
      top:0; left:0;
      background-image: linear-gradient(to bottom, rgba(0,0,0,1) var(--grid), rgba(0,0,0,0));
      z-index: 1;
      transform: translateZ(1px);
      pointer-events: none;
    }

    /* glow layer */
    .grid-container .plane > .glow{
      position:absolute;
      inset:0;
      filter: blur(1rem);
      z-index:1;
      mix-blend-mode: plus-lighter;
      pointer-events:none;
      opacity: 0.12;
    }

    @keyframes move {
      from { transform: translateY(0px); }
      to { transform: translateY(calc(var(--grid) * var(--dir))); }
    }

    /* tiny rotation slow (subtil) */
    @keyframes rotate{
      0%{ transform: none; }
      100%{ transform: rotateY(360deg); }
    }

    /* ====== Base layout / tipografía / general ====== */
    html,body{ height:100%; margin:0; background:#000; font-family: 'Share Tech Mono', 'Courier New', monospace; }
    body{
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }

    h1.typing {
      color: #00ff00;
      font-family: 'Share Tech Mono', monospace;
      font-size: clamp(1.8rem, 4vw, 3rem);
      filter: drop-shadow(0 0 5px currentColor);
      margin: 0 0 18px 0;
      white-space: nowrap;
      position: relative;
      display: inline-block;
    }

    /* cursor blink (simula tu SASS ::after) */
    h1.typing::after{
      content: '';
      display: inline-block;
      width: .2em;
      height: .7em;
      background-color: currentColor;
      margin-left: .12em;
      animation: blink 1s linear infinite forwards;
      vertical-align: baseline;
    }

    @keyframes blink {
      0% { visibility: visible; }
      50%{ visibility: visible; }
      51%{ visibility: hidden; }
      100%{ visibility: hidden; }
    }

    /* ====== Loader (overlay) ====== */
    #loader{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9); /* ligeramente opaco para ver el grid a través */
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      z-index: 9999;
      color: #00ff00;
      gap: 14px;
    }

    /* spinner 3D (igual que antes) */
    .spinner{ width:44px; height:44px; animation: spinner-y 2s infinite ease; transform-style:preserve-3d; margin-top:6px; }
    .spinner>div{ background-color: rgba(0,77,255,0.18); height:100%; position:absolute; width:100%; border:2px solid #004dff; box-sizing:border-box; border-radius:4px; }
    .spinner div:nth-of-type(1){ transform: translateZ(-22px) rotateY(180deg); }
    .spinner div:nth-of-type(2){ transform: rotateY(-270deg) translateX(50%); transform-origin: top right; }
    .spinner div:nth-of-type(3){ transform: rotateY(270deg) translateX(-50%); transform-origin: center left; }
    .spinner div:nth-of-type(4){ transform: rotateX(90deg) translateY(-50%); transform-origin: top center; }
    .spinner div:nth-of-type(5){ transform: rotateX(-90deg) translateY(50%); transform-origin: bottom center; }
    .spinner div:nth-of-type(6){ transform: translateZ(22px); }
    @keyframes spinner-y { 0%{ transform: rotate(45deg) rotateX(-25deg) rotateY(25deg);} 50%{ transform: rotate(45deg) rotateX(-385deg) rotateY(25deg);} 100%{ transform: rotate(45deg) rotateX(-385deg) rotateY(385deg);} }

    /* ====== Contenedor principal / contenido ====== */
    .container {
      display: none; /* visible tras carga */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
      padding: 20px;
      z-index: 10;
      position: relative;
      gap: 18px;
    }

    /* ========== Tarjeta 3D y boton (descargas) ========== */
    .download-area { display:flex; flex-direction:column; align-items:center; gap:14px; z-index: 11; }
    .file-wrapper { display:flex; flex-direction:column; align-items:center; justify-content:center; }
    .file {
      width: 240px;
      height: 160px;
      cursor: pointer;
      perspective: 1500px;
      position: relative;
      z-index: 50;
      display:grid; place-items:center;
    }
    .work-5 { width:100%; height:100%; background: var(--amber-600); border-radius:16px; border-top-left-radius:0; transform-origin: top center; transition: box-shadow .25s ease, transform .3s ease; position:relative; }
    .work-5::after{ content:""; position:absolute; bottom:99%; left:0; width:80px; height:16px; background: var(--amber-600); border-top-left-radius:12px; border-top-right-radius:12px; }
    .work-5::before{ content:""; position:absolute; top:-15px; left:75.5px; width:16px; height:16px; background: var(--amber-600); clip-path: polygon(0 35%, 0% 100%, 50% 100%); }

    .work-4, .work-3, .work-2 { position:absolute; inset:8px; border-radius:12px; transition: transform .3s ease; transform-origin: bottom center; pointer-events:none; }
    .work-4{ background:#a8a29e; }
    .work-3{ background:#d1d5db; }
    .work-2{ background:#e5e7eb; }

    .work-1{ position:absolute; bottom:0; width:100%; height:156px; border-radius:16px; border-top-right-radius:0; background: linear-gradient(to top, var(--amber-500), var(--amber-400)); display:flex; align-items:flex-end; transform-origin:bottom center; transition: transform .3s ease, box-shadow .3s ease; box-shadow: inset 0 20px 40px rgba(251,191,36,0.12), inset 0 -20px 40px rgba(217,119,6,0.06); }
    .work-1::after{ content:""; position:absolute; bottom:99%; right:0; width:146px; height:16px; background: var(--amber-400); border-top-left-radius:12px; border-top-right-radius:12px; }
    .work-1::before{ content:""; position:absolute; top:-10px; right:142px; width:16px; height:16px; background: var(--amber-400); clip-path: polygon(100% 14%, 50% 100%, 100% 100%); }

    .file:hover .work-4 { transform: rotateX(-20deg); }
    .file:hover .work-3 { transform: rotateX(-30deg); }
    .file:hover .work-2 { transform: rotateX(-38deg); }
    .file:hover .work-1 { transform: rotateX(-46deg) translateY(1px); box-shadow: inset 0 20px 40px #fbbf24, inset 0 -20px 40px #d97706; }
    .file:hover .work-5 { box-shadow: 0 20px 40px rgba(0,0,0,.2); transform: translateZ(4px); }

    .file-caption { margin-top: .6rem; font-size: 1.1rem; color: #fff; opacity: .2; pointer-events:none; }

    .download-btn button{ width:165px; height:62px; cursor:pointer; color:#fff; font-size:17px; border-radius:12px; border:none; background:#100720; transition:.25s; box-shadow:0 0 10px rgba(255,94,247,0.6); }
    .download-btn button:hover{ transform:scale(1.05); box-shadow:0 0 20px rgba(2,245,255,0.9),0 0 30px rgba(255,94,247,0.9); }

    /* responsive pequeño */
    @media (max-width:420px){
      .file{ width:12rem; height:8rem; }
      .work-1{ height:120px; }
      h1.typing{ font-size: 2rem; }
    }
  </style>
</head>
<body>
  <!-- GRID BACKGROUND (fijo, debajo de todo) -->
  <div class="grid-container" aria-hidden="true">
    <div class="plane">
      <div class="grid"></div>
      <div class="glow"></div>
    </div>

    <div class="plane">
      <div class="grid"></div>
      <div class="glow"></div>
    </div>
  </div>

  <!-- Loader overlay -->
  <div id="loader" role="status" aria-live="polite">
    <div>Cargando sistema...</div>
    <div class="spinner" aria-hidden="true">
      <div></div><div></div><div></div><div></div><div></div><div></div>
    </div>
  </div>

  <!-- Contenido principal (oculto hasta que termine el loader) -->
  <div class="container" role="main">
    <h1 class="typing">El mejor grupo de la exposición...</h1>

    <div class="download-area" aria-label="Área de descarga">
      <div class="file-wrapper">
        <div class="file" role="button" tabindex="0" aria-label="Archivo interactivo">
          <div class="work-5" aria-hidden="true"></div>
          <div class="work-4" aria-hidden="true"></div>
          <div class="work-3" aria-hidden="true"></div>
          <div class="work-2" aria-hidden="true"></div>
          <div class="work-1" aria-hidden="true"></div>
        </div>
        <p class="file-caption">Archivo listo</p>
      </div>

      <div class="download-btn">
        <a href="video.mp4" download><button>Descargar</button></a>
      </div>
    </div>
  </div>

  <script>
    // ====== Matrix/grid animations are CSS-driven above. Keep JS for loader show/hide & small behaviors ======

    // show content after a short "load"
    window.addEventListener('load', () => {
      const loader = document.getElementById('loader');
      setTimeout(() => {
        loader.style.opacity = '0';
        loader.style.transition = 'opacity 0.45s ease';
        setTimeout(() => {
          loader.style.display = 'none';
          document.querySelector('.container').style.display = 'flex';
        }, 450);
      }, 1500); // 1.5s para pruebas; cámbialo a 3000 si quieres mayor espera
    });

    // keyboard accessibility for file (focus -> same as hover)
    const fileEl = document.querySelector('.file');
    fileEl.addEventListener('focus', () => fileEl.classList.add('focused'));
    fileEl.addEventListener('blur', () => fileEl.classList.remove('focused'));

    // apply same transforms when focused (small JS-injected stylesheet)
    const style = document.createElement('style');
    style.textContent = `
      .file.focused .work-4 { transform: rotateX(-20deg); }
      .file.focused .work-3 { transform: rotateX(-30deg); }
      .file.focused .work-2 { transform: rotateX(-38deg); }
      .file.focused .work-1 { transform: rotateX(-46deg) translateY(1px); box-shadow: inset 0 20px 40px #fbbf24, inset 0 -20px 40px #d97706; }
      .file.focused .work-5 { box-shadow: 0 20px 40px rgba(0,0,0,.2); transform: translateZ(4px); }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>
